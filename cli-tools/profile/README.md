# novel profile - 小説テキスト分析ツール

## ビジョン

Web小説の1話分（〜1万字程度）のテキストを分析し、作品の文体的特徴を可視化するツール。
書き手が自作と参考作品を比較して「何が違うのか」を客観的に把握できることを目指す。

## コンセプト

- **完璧より実用性**: 100%正確な形態素解析より、80%の精度で素早く傾向を掴む
- **比較による学び**: 自作 vs 参考作品の差分から気づきを得る
- **視覚的な理解**: 数値だけでなくASCIIアートで直感的に把握

## 主要機能（MVP）

### Phase 1: 基本統計（1週間で実装）
- [x] 文字数カウント
- [ ] 会話文/地の文の比率（「」のみ対応）
- [ ] 文の長さ分布（。！？で分割）
- [ ] 段落構成（改行パターン分析）
- [ ] 文字種分析（ひらがな/カタカナ/漢字比）

### Phase 2: 文体分析（追加1週間）
- [ ] 括弧の入れ子対応（「」『』）
- [ ] 文のリズム分析（長短の変化パターン）
- [ ] 読点密度（読みやすさ指標）
- [ ] 比較機能（--compare オプション）

### Phase 3: 高度な分析（必要に応じて）
- [ ] 時系列変化（前半/中盤/後半の文体変化）
- [ ] 書き出しパターン検出
- [ ] 簡易語彙分析（頻出語TOP10程度）

## 使用例

```bash
# 基本分析
novel profile episode/chapter1.md

# 比較分析
novel profile my_episode.md --compare reference.md

# JSON出力（CI連携用）
novel profile episode/*.md --format json

# 視覚的レポート
novel profile episode/chapter1.md --chart
```

## 出力イメージ

```
📊 Text Profile: chapter1.md
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Total: 5,234 chars | 142 sentences

📝 Style Balance
  Dialogue:   35% ██████████░░░░░░░░░░
  Narrative:  65% █████████████░░░░░░░

📈 Sentence Rhythm
  Short (1-20):   ████████ 32
  Medium (21-40): ████████████ 48  
  Long (41-60):   ██████ 24
  Very Long (61+): ██ 8

⚡ Readability
  Hiragana:    45% ████████████░░░░░░░░
  Punctuation: 3.2 per sentence
  Tempo:       ▁▃▇▃▁▇▃▁ (varied)
```

## 技術的な割り切り

### やること
- 小説でよく使われる「」『』（）の処理
- 基本的な句読点での文分割
- 1万字程度のメモリ内処理

### やらないこと
- 完全な形態素解析（必要なら外部ツール連携）
- 特殊な記法への対応（【】〈〉など）
- 文法的な正確性の保証

## 実装メモ

### 文境界検出の方針
```rust
// シンプルに。エッジケースは割り切る
// 「。」「！」「？」+ 改行 or スペース を文末とする
// 会話文内は特別扱い
```

### 会話文抽出の方針
```rust
// 「」を基本とし、『』は Phase 2
// 入れ子は nom で美しく処理
// 閉じていない括弧は地の文扱い
```

### 比較機能の価値
```rust
// 数値の羅列より「差分」が気づきを生む
// 「あ、自分の方が会話少ないんだ」
// 「参考作品は短文でテンポ作ってる」
```

## 開発の心構え

「小説を書く人が、ちょっと自分の文章を客観視したいとき」に使える道具を作る。
学術的な正確性より、創作活動に役立つ実用性を重視。